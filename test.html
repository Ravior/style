<!DOCTYPE html>
<html>
<head>
<title>style.js tests</title>
<script src="style.js" type="text/javascript"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"
	type="text/javascript"></script>
<script type="text/javascript">
style({'.error': { color: '#D04;' }});
$(function () {
	var
		body = $(document.body).empty(),
		success = true
	;

	function log(msg, err) {
		$('<div class="entry' + (err ? ' error' : '') + '"></div>').append(msg).appendTo(body);
	}
	function err(msg) {
		log(msg, 1);
		success = false;
	}

	var
		myStyleSheet = style.noConflict().sheet(),
		myStyleEl = document.getElementsByTagName('style')[1],
		test
	;
	if (typeof style === 'undefined') {
		log('.noConflict() worked.');
	} else {
		err('.noConflict() did not remove global reference!');
	}

	test = 'Object notation for both rules and properties';
	myStyleSheet({ body: { background: 'red' }});
	if (myStyleEl.innerText === 'body {\nbackground: red;\n}') {
		log(test + ' worked.');
	} else {
		err(test + ' FAILED.');
	}
	myStyleEl.innerText = '';

	test = 'Object notation for rules, with array notation for properties';
	myStyleSheet({ body: [
		['color', 'red'],
		['padding', '0']
	]});
	if (myStyleEl.innerText === 'body {\ncolor: red;\npadding: 0;\n}') {
		log(test + ' worked.');
	} else {
		err(test + ' FAILED.');
	}
	myStyleEl.innerText = '';

	test = 'Array notation for rules, with mixed notation for properties';
	myStyleSheet([
		['body', { color: 'blue' }],
		['body', [
			['background', 'red'],
			['padding', '0']
		]]
	]);
	if (myStyleEl.innerText === 'body {\ncolor: blue;\n}\nbody {\nbackground: red;\npadding: 0;\n}') {
		log(test + ' worked.');
	} else {
		err(test + ' FAILED.');
	}
	myStyleEl.innerText = '';

	test = 'Classname prefixing';
	myStyleSheet([
		['.body', { color: 'blue' }],
		['.body', [
			['background', 'red'],
			['padding', '0']
		]]
	], { prefix: 'my' });
	if (myStyleEl.innerText === '.mybody {\ncolor: blue;\n}\n.mybody {\nbackground: red;\npadding: 0;\n}') {
		log(test + ' worked.');
	} else {
		err(test + ' FAILED.');
	}
	myStyleEl.innerText = '';

	log(success ? 'All tests passed.' : 'Not all tests passed. :(', !success);
});
</script>
</head>
<body>
</body>
</html>
